<div
  class="relative flex flex-col min-w-0 break-words bg-white w-full mb-6 shadow-lg rounded"
>
  <div class="rounded-t mb-0 px-4 py-3 border-0">
    <div class="flex flex-wrap items-center">
      <div class="relative w-full px-4 max-w-full flex-grow flex-1">
        <div class="flex flex-row justify-between">
          <h3 class="font-normal text-base text-slate-700 mb-2 text-xl">KYC Application: 
            <span class="text-slate-800 text-md font-semibold">{{applicationId}}</span></h3>
            <div class="flex flex-wrap">
              <button
              class="bg-emerald-400 text-white active:bg-slate-600 disabled:bg-emerald-400 text-sm font-bold uppercase px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-3 ease-linear transition-all duration-150"
              type="button"
              (click)="onSave()"
            >
              Save
            </button>
            <button
              class="bg-red-500 text-white active:bg-slate-600 disabled:bg-emerald-400 text-sm font-bold uppercase px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-2 ease-linear transition-all duration-150"
              type="button"
              (click)="onDelete()"
            >
              Delete
            </button>
            </div>
        </div>

        <app-progressbar-application
          stepOneName="Personal Details"
          stepOne="{{steps[0].progress}}"
          stepTwoName="ID Proof"
          stepTwo="{{steps[1].progress}}"
          stepThreeName="Address"
          stepThree="{{steps[2].progress}}"
          stepFourName="Proof of Address"
          stepFour="{{steps[3].progress}}"
          stepFiveName="Contact"
          stepFive="{{steps[4].progress}}"
          stepSixName="Declaration"
          stepSix="{{steps[5].progress}}"
        ></app-progressbar-application>
        
        <hr class="mt-6 border-b-1 border-slate-300" />
        
        <div class="flex-auto px-4 lg:px-4 py-10 pt-2">
          <form [formGroup]="individualApplicationForm">
            <div *ngIf="step === 1">
            <h6 class="text-slate-400 text-sm mt-3 mb-6 font-bold uppercase">
              Personal Details
            </h6>
            <div class="flex flex-wrap">
              <div class="w-full lg:w-6/12 px-4">
                <div class="relative w-full mb-3">
                  <label
                    class="block uppercase text-slate-600 text-xs font-bold mb-2"
                  >
                    First Name
                  </label>
                  <input
                    type="text"
                    class="border-0 px-3 py-3 placeholder-slate-400 text-slate-600 bg-slate-100 rounded text-sm shadow focus:outline-none focus:ring-0 w-full ease-linear transition-all duration-150"
                    placeholder="First Name"
                    formControlName="firstName"
                  />
                </div>
              </div>

              <div class="w-full lg:w-6/12 px-4">
                <div class="relative w-full mb-3">
                  <label
                    class="block uppercase text-slate-600 text-xs font-bold mb-2"
                  >
                    Last Name
                  </label>
                  <input
                  type="text"
                  class="border-0 px-3 py-3 placeholder-slate-400 text-slate-600 bg-slate-100 rounded text-sm shadow focus:outline-none focus:ring-0 w-full ease-linear transition-all duration-150"
                  placeholder="Last Name"
                  formControlName="lastName"
                  />
                </div>
              </div>

              <div class="w-full lg:w-6/12 px-4">
                <div class="relative w-full mt-3 mb-3">
                  <label
                    class="block uppercase text-slate-600 text-xs font-bold mb-2"
                  >
                    Maiden Name <span class="lowercase">(if any)</span>
                  </label>
                  <input
                    type="text"
                    class="border-0 px-3 py-3 placeholder-slate-400 text-slate-600 bg-slate-100 rounded text-sm shadow focus:outline-none focus:ring-0 w-full ease-linear transition-all duration-150"
                    placeholder="Maiden Name"
                    formControlName="maidenName"
                  />
                </div>
              </div>

              <div class="w-full lg:w-6/12 px-4">
                <div class="relative w-full mt-3 mb-3">
                  <label
                    class="block uppercase text-slate-600 text-xs font-bold mb-2"
                  >
                    Father's Name
                  </label>
                  <input
                    type="text"
                    class="border-0 px-3 py-3 placeholder-slate-400 text-slate-600 bg-slate-100 rounded text-sm shadow focus:outline-none focus:ring-0 w-full ease-linear transition-all duration-150"
                    placeholder="Father's Name"
                    formControlName="fatherName"
                  />
                </div>
              </div>

              <div class="w-full lg:w-6/12 px-4">
                <div class="relative w-full mt-3 mb-3">
                  <label
                    class="block uppercase text-slate-600 text-xs font-bold mb-2"
                  >
                    Mother's Name
                  </label>
                  <input
                    type="text"
                    class="border-0 px-3 py-3 placeholder-slate-400 text-slate-600 bg-slate-100 rounded text-sm shadow focus:outline-none focus:ring-0 w-full ease-linear transition-all duration-150"
                    placeholder="Mother's Name"
                    formControlName="motherName"
                  />
                </div>
              </div>

              <div class="w-full lg:w-6/12 px-4">
                <div class="relative w-full mt-3 mb-3">
                  <label
                    class="block uppercase text-slate-600 text-xs font-bold mb-2"
                  >
                    Mother's Maiden Name <span class="lowercase">(if any)</span>
                  </label>
                  <input
                    type="text"
                    class="border-0 px-3 py-3 placeholder-slate-400 text-slate-600 bg-slate-100 rounded text-sm shadow focus:outline-none focus:ring-0 w-full ease-linear transition-all duration-150"
                    placeholder="Mother's Maiden Name"
                    formControlName="motherMaidenName"
                  />
                </div>
              </div>

              <div class="w-full lg:w-6/12 px-4">
                <div class="relative w-full mt-3 mb-3">
                  <label
                    class="block uppercase text-slate-600 text-xs font-bold mb-2"
                  >
                    Spouse Name <span class="lowercase">(if any)</span>
                  </label>
                  <input
                    type="text"
                    class="border-0 px-3 py-3 placeholder-slate-400 text-slate-600 bg-slate-100 rounded text-sm shadow focus:outline-none focus:ring-0 w-full ease-linear transition-all duration-150"
                    placeholder="Spouse Name"
                    formControlName="spouseName"
                  />
                </div>
              </div>

              <div class="w-full lg:w-6/12 px-4">
                <div class="relative w-full mt-3 mb-3 justify-between">
                  <label
                    class="block uppercase text-slate-600 text-xs font-bold mb-2"
                  >
                    Marital Status
                  </label>

                  <div class="form-check inline-block ml-3">
                    <input 
                      class="form-check-input form-check-input appearance-none rounded-full h-4 w-4 border border-gray-300 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none focus:ring-0 transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" 
                      type="radio" 
                      name="maritalStatus" 
                      id="radioSingle" 
                      value="SINGLE"
                      formControlName="maritalStatus"
                    >
                    <label class="form-check-label inline-block text-sm text-slate-700" for="radioSingle">Single</label>
                  </div>
                  <div class="form-check inline-block ml-3">
                    <input 
                      class="form-check-input form-check-input appearance-none rounded-full h-4 w-4 border border-gray-300 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none focus:ring-0 transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" 
                      type="radio" 
                      name="maritalStatus" 
                      id="radioMarried" 
                      value="MARRIED"
                      formControlName="maritalStatus"
                    >
                    <label class="form-check-label inline-block text-sm text-slate-700" for="radioMarried">Married</label>
                  </div>
                  <div class="form-check inline-block ml-3">
                    <input 
                      class="form-check-input form-check-input appearance-none rounded-full h-4 w-4 border border-gray-300 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none focus:ring-0 transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" 
                      type="radio" 
                      name="maritalStatus" 
                      id="radioWidowed" 
                      value="WIDOWED"
                      formControlName="maritalStatus"
                    >
                    <label class="form-check-label inline-block text-sm text-slate-700" for="radioWidowed">Widowed</label>
                  </div>
                  <div class="form-check inline-block ml-3">
                    <input 
                      class="form-check-input form-check-input appearance-none rounded-full h-4 w-4 border border-gray-300 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none focus:ring-0 transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" 
                      type="radio" 
                      name="maritalStatus" 
                      id="radioDivorced" 
                      value="DIVORCED"
                      formControlName="maritalStatus"
                    >
                    <label class="form-check-label inline-block text-sm text-slate-700" for="radioDivorced">Divorced</label>
                  </div>
                </div>
              </div>

              <div class="w-full lg:w-6/12 px-4">
                <div class="relative w-full mt-3 mb-3 justify-between">
                  <label
                    class="block uppercase text-slate-600 text-xs font-bold mb-2"
                  >
                    Gender
                  </label>

                  <div class="form-check inline-block ml-3">
                    <input 
                      class="form-check-input form-check-input appearance-none rounded-full h-4 w-4 border border-gray-300 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none focus:ring-0 transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" 
                      type="radio" 
                      name="gender" 
                      id="radioMale" 
                      value="MALE"
                      formControlName="gender"
                    >
                    <label class="form-check-label inline-block text-sm text-slate-700" for="radioSingle">Male</label>
                  </div>
                  <div class="form-check inline-block ml-3">
                    <input 
                      class="form-check-input form-check-input appearance-none rounded-full h-4 w-4 border border-gray-300 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none focus:ring-0 transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" 
                      type="radio" 
                      name="gender" 
                      id="radioFemale" 
                      value="FEMALE"
                      formControlName="gender"
                    >
                    <label class="form-check-label inline-block text-sm text-slate-700" for="radioSingle">Female</label>
                  </div>
                  <div class="form-check inline-block ml-3">
                    <input 
                      class="form-check-input form-check-input appearance-none rounded-full h-4 w-4 border border-gray-300 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none focus:ring-0 transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" 
                      type="radio" 
                      name="gender" 
                      id="radioOther" 
                      value="OTHER"
                      formControlName="gender"
                    >
                    <label class="form-check-label inline-block text-sm text-slate-700" for="radioSingle">Other</label>
                  </div>
                </div>
              </div>
            </div>

          <div class="flex flex-wrap">
            <div class="w-full lg:w-6/12 px-4">
              <div class="relative w-full mt-3 mb-3">
                <label
                  class="block uppercase text-slate-600 text-xs font-bold mb-2"
                >
                  Date of Birth
                </label>
                <input
                  type="text"
                  class="border-0 px-3 py-3 placeholder-slate-400 text-slate-600 bg-slate-100 rounded text-sm shadow focus:outline-none focus:ring-0 w-full ease-linear transition-all duration-150"
                  placeholder="MM/DD/YYYY"
                  formControlName="dob"
                  (keydown)="onDateKey($event)"
                  maxlength="10"
                />
              </div>
            </div>

            <div class="w-full lg:w-6/12 px-4">
              <div class="relative w-full mt-3 mb-3 justify-between">
                <label
                  class="block uppercase text-slate-600 text-xs font-bold mb-2"
                >
                  Citizenship Status
                </label>
                <select 
                    formControlName="citizenshipStatus" 
                    class="border-0 px-3 py-3 placeholder-slate-300 text-slate-600 bg-slate-100 rounded text-sm shadow focus:outline-none focus:ring-0 w-full ease-linear transition-all duration-150"
                    >
                    <option hidden value="" disabled selected>Select Citizenship Status</option>
                      <option 
                        *ngFor="let status of citizenshipTypes"
                        [value]="status.code"
                      >
                      {{status.name}}
                      </option>
                </select>
              </div>
            </div>

            <div class="w-full lg:w-6/12 px-4">
              <div class="relative w-full mt-3 mb-3">
                <label
                  class="block uppercase text-slate-600 text-xs font-bold mb-2"
                >
                  Occupation
                </label>
                <input
                  type="text"
                  class="border-0 px-3 py-3 placeholder-slate-400 text-slate-600 bg-slate-100 rounded text-sm shadow focus:outline-none focus:ring-0 w-full ease-linear transition-all duration-150"
                  placeholder="Occupation"
                  formControlName="occupation"
                />
              </div>
            </div>

            <div class="w-full lg:w-6/12 px-4">
              <div class="relative w-full mt-3 mb-3 justify-between">
                <label
                  class="inline-block text-slate-600 text-xs font-bold mb-2"
                >
                  Politically Exposed Person (PEP)?
                </label>

                <div class="form-check inline-block ml-3">
                  <input 
                    class="form-check-input form-check-input appearance-none rounded-full h-4 w-4 border border-gray-300 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none focus:ring-0 transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" 
                    type="radio" 
                    name="isPEP" 
                    id="radioPEPYes" 
                    value="YES"
                    formControlName="isPEP"
                  >
                  <label class="form-check-label inline-block text-sm text-slate-700" for="radioPEPYes">Yes</label>
                </div>
                <div class="form-check inline-block ml-3">
                  <input 
                    class="form-check-input form-check-input appearance-none rounded-full h-4 w-4 border border-gray-300 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none focus:ring-0 transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" 
                    type="radio" 
                    name="isPEP" 
                    id="radioPEPNo" 
                    value="NO"
                    formControlName="isPEP"
                  >
                  <label class="form-check-label inline-block text-sm text-slate-700" for="radioPEPNo">No</label>
                </div>
              </div>

              <div class="relative w-full mt-3 mb-3 justify-between">
                <label
                  class="inline-block text-slate-600 text-xs font-bold mb-2"
                >
                  Relative or Associate of PEP ?
                </label>

                <div class="form-check inline-block ml-3">
                  <input 
                    class="form-check-input form-check-input appearance-none rounded-full h-4 w-4 border border-gray-300 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none focus:ring-0 transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" 
                    type="radio" 
                    name="isRcaPEP" 
                    id="radioRcaYes" 
                    value="YES"
                    formControlName="isRcaPEP"
                  >
                  <label class="form-check-label inline-block text-sm text-slate-700" for="radioRcaYes">Yes</label>
                </div>
                <div class="form-check inline-block ml-3">
                  <input 
                    class="form-check-input form-check-input appearance-none rounded-full h-4 w-4 border border-gray-300 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none focus:ring-0 transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" 
                    type="radio" 
                    name="isRcaPEP" 
                    id="radioRcaNo" 
                    value="NO"
                    formControlName="isRcaPEP"
                  >
                  <label class="form-check-label inline-block text-sm text-slate-700" for="radioRcaNo">No</label>
                </div>
              </div>
            </div>

            <div class="w-full lg:w-6/12 px-4">
              <div class="relative w-full mt-3 mb-3">
                <label
                  class="block uppercase text-slate-600 text-xs font-bold mb-2"
                >
                  Political (PEP) Exposure
                </label>
                <select 
                    formControlName="pepExposure" 
                    class="border-0 px-3 py-3 placeholder-slate-300 text-slate-600 bg-slate-100 rounded text-sm shadow focus:outline-none focus:ring-0 w-full ease-linear transition-all duration-150"
                    >
                    <option hidden value="" disabled selected>Select PEP Exposure</option>
                      <option 
                        *ngFor="let types of pepTypes | orderBy: 'name'"
                        [value]="types.code"
                      >
                      {{types.name}}
                      </option>
                </select>
              </div>
            </div>

          </div>
        </div>

        <div *ngIf="step === 2">
          <h6 class="text-slate-400 text-sm mt-3 font-bold uppercase">
            Proof of Identity
          </h6>
          <p class="text-slate-600 text-sm mt-1 mb-6 font-semibold">Must provide a document for individual identification</p>
         
          <div class="flex flex-wrap">
            <div class="relative w-full mt-3 mb-3 justify-between">
              <label
                class="block text-slate-600 text-sm font-bold mb-2"
              >
                Choose your document type
              </label>

              <div class="form-check inline-block ml-3">
                <input 
                  class="form-check-input form-check-input appearance-none rounded-full h-4 w-4 border border-gray-300 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none focus:ring-0 transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" 
                  type="radio" 
                  name="poiType" 
                  id="radioPassport" 
                  value="PP"
                  formControlName="poiType"
                >
                <label class="form-check-label inline-block text-sm text-slate-700" for="radioPassport">Passport</label>
              </div>
              <div class="form-check inline-block ml-3">
                <input 
                  class="form-check-input form-check-input appearance-none rounded-full h-4 w-4 border border-gray-300 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none focus:ring-0 transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" 
                  type="radio" 
                  name="poiType" 
                  id="radioDL" 
                  value="DL"
                  formControlName="poiType"
                >
                <label class="form-check-label inline-block text-sm text-slate-700" for="radioDL">Driver's License</label>
              </div>
              <div class="form-check inline-block ml-3">
                <input 
                  class="form-check-input form-check-input appearance-none rounded-full h-4 w-4 border border-gray-300 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none focus:ring-0 transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" 
                  type="radio" 
                  name="poiType" 
                  id="radioIDCard" 
                  value="ID"
                  formControlName="poiType"
                >
                <label class="form-check-label inline-block text-sm text-slate-700" for="radioIDCard">ID Card</label>
              </div>
              <div class="form-check inline-block ml-3">
                <input 
                  class="form-check-input form-check-input appearance-none rounded-full h-4 w-4 border border-gray-300 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none focus:ring-0 transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" 
                  type="radio" 
                  name="poiType" 
                  id="radioRP" 
                  value="RP"
                  formControlName="poiType"
                >
                <label class="form-check-label inline-block text-sm text-slate-700" for="radioRP">Residence Permit</label>
              </div>
            </div>
          </div>
          <div class="flex flex-col items-center">
            <p class="text-center text-sm mt-6 mb-1 font-semibold">Upload a photo of your document that is bright and clear (good quality) and fully visible.</p>
            <p class="text-center text-sm mt-1 mb-6 font-normal">Upload .jpg/.jpeg/.png file less than 10MB.</p>
          </div>
          <div class='flex items-center justify-center w-full'>
            <label class="flex flex-col border-4 border-slate-100 border-dashed w-full h-32 hover:bg-slate-50 hover:border-sky-200">
                <div class='flex flex-col items-center pt-8'>
                  <i class="fas fa-id-card fa-2xl mt-3 mb-3"></i>
                  <p class='text-sm text-slate-500 group-hover:text-red-600 pt-2 tracking-wide'>{{poiLabel}}</p>
                </div>
              <input type='file' class="hidden" value="proofOfIdentity" (change)="handlePoiFileInput($event.target.files)" />
            </label>
        </div>
        </div>

        <div *ngIf="step === 3">
          <h6 class="text-slate-400 text-sm mt-3 mb-6 font-bold uppercase">
            Address Details
          </h6>
          <p class="text-slate-600 text-sm mt-1 mb-6 font-semibold">Current Address</p>
          <div class="flex flex-wrap">
            <div class=" w-full lg:w-6/12 px-4 flex flex-grow gap-6">
              <div class="relative w-full mb-3">
                <label
                  class="block uppercase text-slate-600 text-xs font-bold mb-2 mr-4"
                >
                  Address
                </label>
                <input
                  type="text"
                  class="border-0 px-3 py-3 placeholder-slate-300 text-slate-600 bg-white rounded text-sm shadow focus:outline-none focus:ring-0 w-full ease-linear transition-all duration-150"
                  placeholder="Street Address"
                  formControlName="address"
                />
                <div *ngIf="individualApplicationForm.controls['address'].invalid && (individualApplicationForm.controls['address'].touched)" 
                  class="text-sm text-red-500 mt-1">
                  <div *ngIf="individualApplicationForm.controls['address'].errors.required">
                    Please enter address
                  </div>
                </div>
              </div>
            
              <div class="relative w-6/12 mb-3">
                <label
                  class="block uppercase text-slate-600 text-xs font-bold mb-2"
                >
                  City
                </label>
                <input
                  type="text"
                  class="border-0 px-3 py-3 placeholder-slate-300 text-slate-600 bg-white rounded text-sm shadow focus:outline-none focus:ring-0 w-full ease-linear transition-all duration-150"
                  placeholder="City"
                  formControlName="city"
                />
                <div *ngIf="individualApplicationForm.controls['city'].invalid && (individualApplicationForm.controls['city'].touched)" 
                  class="text-sm text-red-500 mt-1">
                  <div *ngIf="individualApplicationForm.controls['city'].errors.required">
                    Please enter city
                  </div>
                </div>
              </div>

              <div class="relative w-18 mb-3">
                <label
                  class="block uppercase text-slate-600 text-xs font-bold mb-2"
                >
                  State
                </label>
                <input
                  type="text"
                  class="border-0 px-3 py-3 placeholder-slate-300 text-slate-600 bg-white rounded text-sm shadow focus:outline-none focus:ring-0 w-full ease-linear transition-all duration-150"
                  placeholder="ST"
                  formControlName="state"
                />
                <div *ngIf="individualApplicationForm.controls['state'].invalid && (individualApplicationForm.controls['state'].touched)" 
                  class="text-sm text-red-500 mt-1">
                  <div *ngIf="individualApplicationForm.controls['state'].errors.required">
                    Please enter state
                  </div>
                </div>
              </div>

              <div class="relative w-6/12 mb-3">
                <label
                  class="block uppercase text-slate-600 text-xs font-bold mb-2"
                >
                  Postal Code
                </label>
                <input
                  type="text"
                  class="border-0 px-3 py-3 placeholder-slate-300 text-slate-600 bg-white rounded text-sm shadow focus:outline-none focus:ring-0 w-full ease-linear transition-all duration-150"
                  placeholder="Postal Code"
                  formControlName="postalCode"
                />
                <div *ngIf="individualApplicationForm.controls['postalCode'].invalid && (individualApplicationForm.controls['postalCode'].touched)" 
                  class="text-sm text-red-500 mt-1">
                  <div *ngIf="individualApplicationForm.controls['postalCode'].errors.required">
                    Please enter postal code
                  </div>
                  <div *ngIf="individualApplicationForm.controls['postalCode'].errors.pattern">
                    Please enter a valid postal code
                  </div>
                </div>
              </div>
          
              <div class="relative w-6/12 mb-3">
                <label
                  class="block uppercase text-slate-600 text-xs font-bold mb-2"
                >
                  Country
                </label>
                <select 
                formControlName="country" 
                class="border-0 px-3 py-3 placeholder-slate-300 text-slate-600 bg-white rounded text-sm shadow focus:outline-none focus:ring-0 w-full ease-linear transition-all duration-150"
                >
                  <option hidden value="" disabled selected>Select Country</option>
                  <option 
                    *ngFor="let country of countries | orderBy: 'name'"
                    [value]="country.code"
                  >
                  {{country.name}}
                  </option>
              </select>
              </div>
            </div>
          </div>
          <p class="text-slate-600 text-sm mt-6 mb-3 font-semibold">Permanent Address</p>

          <div class="w-full lg:w-6/12">
            <div class="relative w-full mt-1 mb-6 justify-between">
              <label
                class="inline-block text-slate-600 text-xs font-bold mb-2"
              >
                Same as current address?
              </label>

              <div class="form-check inline-block ml-3">
                <input 
                  class="form-check-input form-check-input appearance-none rounded-full h-4 w-4 border border-gray-300 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none focus:ring-0 transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" 
                  type="radio" 
                  name="isSameAddress" 
                  id="radioYesAddress" 
                  value="YES"
                  formControlName="isSameAddress"
                >
                <label class="form-check-label inline-block text-sm text-slate-700" for="radioYesAddress">Yes</label>
              </div>
              <div class="form-check inline-block ml-3">
                <input 
                  class="form-check-input form-check-input appearance-none rounded-full h-4 w-4 border border-gray-300 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none focus:ring-0 transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" 
                  type="radio" 
                  name="isSameAddress" 
                  id="radioNoAddress" 
                  value="NO"
                  formControlName="isSameAddress"
                >
                <label class="form-check-label inline-block text-sm text-slate-700" for="radioNoAddress">No</label>
              </div>
            </div>
            </div>

          <div class="flex flex-wrap" *ngIf="!isAddressSame()">
            <div class=" w-full lg:w-6/12 px-4 flex flex-grow gap-6">
              <div class="relative w-full mb-3">
                <label
                  class="block uppercase text-slate-600 text-xs font-bold mb-2 mr-4"
                >
                  Address
                </label>
                <input
                  type="text"
                  class="border-0 px-3 py-3 placeholder-slate-300 text-slate-600 bg-white rounded text-sm shadow focus:outline-none focus:ring-0 w-full ease-linear transition-all duration-150"
                  placeholder="Street Address"
                  formControlName="permanentAddress"
                />
                <div *ngIf="individualApplicationForm.controls['permanentAddress'].invalid && (individualApplicationForm.controls['permanentAddress'].touched)" 
                  class="text-sm text-red-500 mt-1">
                  <div *ngIf="individualApplicationForm.controls['permanentAddress'].errors.required">
                    Please enter your address
                  </div>
                </div>
              </div>
            
              <div class="relative w-6/12 mb-3">
                <label
                  class="block uppercase text-slate-600 text-xs font-bold mb-2"
                >
                  City
                </label>
                <input
                  type="text"
                  class="border-0 px-3 py-3 placeholder-slate-300 text-slate-600 bg-white rounded text-sm shadow focus:outline-none focus:ring-0 w-full ease-linear transition-all duration-150"
                  placeholder="City"
                  formControlName="permanentCity"
                />
                <div *ngIf="individualApplicationForm.controls['permanentCity'].invalid && (individualApplicationForm.controls['permanentCity'].touched)" 
                  class="text-sm text-red-500 mt-1">
                  <div *ngIf="individualApplicationForm.controls['permanentCity'].errors.required">
                    Please enter city
                  </div>
                </div>
              </div>

              <div class="relative w-18 mb-3">
                <label
                  class="block uppercase text-slate-600 text-xs font-bold mb-2"
                >
                  State
                </label>
                <input
                  type="text"
                  class="border-0 px-3 py-3 placeholder-slate-300 text-slate-600 bg-white rounded text-sm shadow focus:outline-none focus:ring-0 w-full ease-linear transition-all duration-150"
                  placeholder="ST"
                  formControlName="permanentState"
                />
                <div *ngIf="individualApplicationForm.controls['permanentState'].invalid && (individualApplicationForm.controls['permanentState'].touched)" 
                  class="text-sm text-red-500 mt-1">
                  <div *ngIf="individualApplicationForm.controls['permanentState'].errors.required">
                    Please enter state
                  </div>
                </div>
              </div>

              <div class="relative w-6/12 mb-3">
                <label
                  class="block uppercase text-slate-600 text-xs font-bold mb-2"
                >
                  Postal Code
                </label>
                <input
                  type="text"
                  class="border-0 px-3 py-3 placeholder-slate-300 text-slate-600 bg-white rounded text-sm shadow focus:outline-none focus:ring-0 w-full ease-linear transition-all duration-150"
                  placeholder="Postal Code"
                  formControlName="permanentPostalCode"
                />
                <div *ngIf="individualApplicationForm.controls['permanentPostalCode'].invalid && (individualApplicationForm.controls['permanentPostalCode'].touched)" 
                  class="text-sm text-red-500 mt-1">
                  <div *ngIf="individualApplicationForm.controls['permanentPostalCode'].errors.required">
                    Please enter postal code
                  </div>
                  <div *ngIf="individualApplicationForm.controls['permanentPostalCode'].errors.pattern">
                    Please enter a valid postal code
                  </div>
                </div>
              </div>
          
              <div class="relative w-6/12 mb-3">
                <label
                  class="block uppercase text-slate-600 text-xs font-bold mb-2"
                >
                  Country
                </label>
                <select 
                formControlName="permanentCountry" 
                class="border-0 px-3 py-3 placeholder-slate-300 text-slate-600 bg-white rounded text-sm shadow focus:outline-none focus:ring-0 w-full ease-linear transition-all duration-150"
                >
                  <option hidden value="" disabled selected>Select Country</option>
                  <option 
                    *ngFor="let country of countries | orderBy: 'name'"
                    [value]="country.code"
                  >
                  {{country.name}}
                  </option>
              </select>
              </div>
            </div>
          </div>
          </div>

          <div *ngIf="step === 4">
            <h6 class="text-slate-400 text-sm mt-3 font-bold uppercase">
              Proof of Address
            </h6>
            <p class="text-slate-600 text-sm mt-1 mb-6 font-semibold">Must provide a document for address verification</p>
           
            <div class="flex flex-wrap">
              <div class="relative w-full mt-3 mb-3 justify-between">
                <label
                  class="block text-slate-600 text-sm font-bold mb-2"
                >
                  Choose your document type
                </label>
  
                <div class="form-check inline-block ml-3">
                  <input 
                    class="form-check-input form-check-input appearance-none rounded-full h-4 w-4 border border-gray-300 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none focus:ring-0 transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" 
                    type="radio" 
                    name="poaType" 
                    id="radioUB" 
                    value="UB"
                    formControlName="poaType"
                  >
                  <label class="form-check-label inline-block text-sm text-slate-700" for="radioUB">Utility Bill (less than 3 months old)</label>
                </div>
                <div class="form-check inline-block ml-3">
                  <input 
                    class="form-check-input form-check-input appearance-none rounded-full h-4 w-4 border border-gray-300 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none focus:ring-0 transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" 
                    type="radio" 
                    name="poaType" 
                    id="radioBS" 
                    value="BS"
                    formControlName="poaType"
                  >
                  <label class="form-check-label inline-block text-sm text-slate-700" for="radioBS">Bank Statement (less than 3 months old)</label>
                </div>
                <div class="form-check inline-block ml-3">
                  <input 
                    class="form-check-input form-check-input appearance-none rounded-full h-4 w-4 border border-gray-300 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none focus:ring-0 transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" 
                    type="radio" 
                    name="poaType" 
                    id="radioLA" 
                    value="LA"
                    formControlName="poaType"
                  >
                  <label class="form-check-label inline-block text-sm text-slate-700" for="radioLA">Lease Agreement</label>
                </div>
                <div class="form-check inline-block ml-3">
                  <input 
                    class="form-check-input form-check-input appearance-none rounded-full h-4 w-4 border border-gray-300 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none focus:ring-0 transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" 
                    type="radio" 
                    name="poaType" 
                    id="radioLI" 
                    value="LI"
                    formControlName="poaType"
                  >
                  <label class="form-check-label inline-block text-sm text-slate-700" for="radioLI">Life Insurance Policy</label>
                </div>
              </div>
            </div>
            <div class="flex flex-col items-center">
              <p class="text-center text-sm mt-6 mb-1 font-semibold">Upload a document that is bright and clear (good quality) and fully visible.</p>
              <p class="text-center text-sm mt-1 mb-6 font-normal">Upload .jpg/.jpeg/.png/.doc/.pdf file less than 10MB.</p>
            </div>
            
            <div class='flex items-center justify-center w-full'>
              <label class="flex flex-col border-4 border-slate-100 border-dashed w-full h-32 hover:bg-slate-50 hover:border-sky-200">
                  <div class='flex flex-col items-center pt-8'>
                    <i class="fas fa-file-image fa-2xl mt-3 mb-3"></i>
                    <p class='text-sm text-slate-500 group-hover:text-red-600 pt-2 tracking-wide'>{{poaLabel}}</p>
                  </div>
                <input type='file' class="hidden" value="proofOfAddress" (change)="handlePoaFileInput($event.target.files)" />
              </label>
          </div>
          </div>

          <div *ngIf="step === 5">
            <h6 class="text-slate-400 text-sm mt-3 mb-6 font-bold uppercase">
              Contact Information
            </h6>
            <div class="flex flex-wrap">
              <div class="w-full lg:w-6/12 px-4">
                <div class="relative w-full mb-3">
                  <label
                    class="block uppercase text-slate-600 text-xs font-bold mb-2"
                  >
                    Email
                  </label>
                  <input
                    type="text"
                    class="border-0 px-3 py-3 placeholder-slate-400 text-slate-600 bg-slate-100 rounded text-sm shadow focus:outline-none focus:ring-0 w-full ease-linear transition-all duration-150"
                    placeholder="Email"
                    formControlName="email"
                  />
                  <div *ngIf="individualApplicationForm.controls['email'].invalid && (individualApplicationForm.controls['email'].touched)" 
                      class="text-sm text-red-500 mt-1">
                      <div *ngIf="individualApplicationForm.controls['email'].errors.required">
                        Please enter email
                      </div>
                      <div *ngIf="individualApplicationForm.controls['email'].errors.email">
                        Please enter a valid email address
                      </div>
                  </div>
                </div>
              </div>

              <div class="w-full lg:w-6/12 px-4">
                <div class="relative w-full mb-3">
                  <label
                    class="block uppercase text-slate-600 text-xs font-bold mb-2"
                  >
                    Phone Number
                  </label>
                  <input
                    type="text"
                    class="border-0 px-3 py-3 placeholder-slate-400 text-slate-600 bg-slate-100 rounded text-sm shadow focus:outline-none focus:ring-0 w-full ease-linear transition-all duration-150"
                    placeholder="XXX-XXX-XXXX"
                    formControlName="phone"
                  />
                  <div *ngIf="individualApplicationForm.controls['phone'].invalid && (individualApplicationForm.controls['phone'].touched)" 
                      class="text-sm text-red-500 mt-1">
                      <div *ngIf="individualApplicationForm.controls['phone'].errors.required">
                        Please enter phone number
                      </div>
                      <div *ngIf="individualApplicationForm.controls['phone'].errors.pattern">
                        Please enter a valid phone number
                      </div>
                  </div>
                </div>
              </div>
            </div>
            </div>

            <div *ngIf="step === 6 && !showApplicationReview">
              <h6 class="text-slate-400 text-sm mt-3 mb-1 font-bold uppercase">
                KYC Declaration
              </h6>
              <div>
                <label class="inline-flex cursor-pointer mt-6 px-2">
                  <input
                    type="checkbox"
                    class="form-checkbox border-0 focus:ring-0 bg-slate-200 text-slate-700 ml-1 w-5 h-5 ease-linear transition-all duration-150 rounded"
                    formControlName="isDeclared"
                    required
                  />
                  <p class="ml-2 text-slate-600 text-sm mb-6 font-normal">
                    I <span class="font-bold">{{individualApplicationForm.value.firstName}} {{individualApplicationForm.value.lastName}}</span> hereby declare that the information provided by me is true and correct to the best of my knowledge and
                    belief. I also confirm that in the event of any information provided by me is found incorrect and/or in the event of any violation of Government 
                    Regulation related to the Bank Secrecy Act (BSA) of 1970 it will be within the right of said Financial Institution to reject/discontinue their customer
                    relationship with me and may initiate legal action applicable under provisions if necessary.
                  </p>
                </label>
              </div>
            </div>

            <div *ngIf="showApplicationReview">
              <app-card-review-application
                applicationDetails="{{applicationDetails | stringify}}"
              ></app-card-review-application>
            </div>

          <div class="{{ showPreviousButton() ? 'flex justify-between' : 'text-right' }} mt-6">
            <button
              *ngIf="showPreviousButton()"
              class="bg-sky-500 text-white active:bg-slate-600 disabled:bg-emerald-400 text-sm font-bold uppercase px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150"
              type="button"
              (click)="previousStep()"
            >
            <i class="fas fa-arrow-left fa-lg mt-3 mr-2"></i>
              Previous
            </button>

            <button
              class="{{forwardButtonColor}} text-white active:bg-slate-600 disabled:bg-emerald-400 text-sm font-bold uppercase px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150"
              type="button"
              (click)="nextStep()"
              [disabled]="step === 6 && !individualApplicationForm.value.isDeclared"
            >
              {{forwardButtonText}}
              <i *ngIf="!showApplicationReview" class="fas fa-arrow-right fa-lg mt-3 ml-2"></i>
            </button>
          </div>
          </form>
        </div>

      </div>
    </div>
  </div>
  <ngx-loading [show]="isLoading" [config]="{ backdropBorderRadius: '3px', backdropBackgroundColour: 'rgba(0, 0, 0, 0.5)'}"></ngx-loading>
</div>

